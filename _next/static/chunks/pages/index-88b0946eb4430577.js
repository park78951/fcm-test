(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,o,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3005)}])},3005:function(e,o,n){"use strict";n.r(o),n.d(o,{default:function(){return _}});var t=n(5893),i=n(7294),r=n(9008),s=n.n(r),c=n(3977),a=n(175),d=n(7160),l=n.n(d);let p=()=>{let e=()=>{fetch("/api/push",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){console.log("requestPush",e)})},o=()=>{let e=sessionStorage.getItem("fcm_token");e&&fetch("/api/push",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})})};return{requestPush:e,removePushNotification:o}},u={apiKey:"AIzaSyBEAwko9Jq14UBFNbrj4c4ukn6eIcn8Vfw",authDomain:"dobo-fcm-test.firebaseapp.com",projectId:"dobo-fcm-test",storageBucket:"dobo-fcm-test.appspot.com",messagingSenderId:"772795326260",appId:"1:772795326260:web:9c3a8063bb5ddf9615cf61",measurementId:"G-5MWNM1MK5E"};function _(){let{requestPush:e,removePushNotification:o}=p(),n=()=>{e()},r=async()=>{if(!("Notification"in window)){console.log("This browser does not support desktop notification"),alert("This browser does not support desktop notification");return}let e=await Notification.requestPermission();if("granted"!==e)return;let o=(0,c.ZF)(u),n=(0,a.KL)(o);(0,a.LP)(n,{vapidKey:"BNi0izdiddhgMXNGeFwTk08a6NU5qw7Vp9H0lpHi4LrLIG6H1tBvCxUlplY57pZWoyQVOSbNKmYw5V_kM_3PE0M"}).then(e=>{e?(console.log("currentToken",e),fetch("/api/push",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),sessionStorage.setItem("fcm_token",e)):console.log("No registration token available. Request permission to generate one.")}).catch(e=>{console.log("An error occurred while retrieving token. ",e),alert(e)}),(0,a.ps)(n,e=>{var o,n,t,i;console.log("Message Received",e);let r=null!==(t=null===(o=e.notification)||void 0===o?void 0:o.title)&&void 0!==t?t:"",s={body:null!==(i=null===(n=e.notification)||void 0===n?void 0:n.body)&&void 0!==i?i:"",icon:"/favicon.ico"};new Notification(r,s)})};return(0,i.useEffect)(()=>{r()},[]),(0,t.jsxs)("div",{className:l().container,children:[(0,t.jsxs)(s(),{children:[(0,t.jsx)("title",{children:"초기 페이지"}),(0,t.jsx)("meta",{name:"description",content:"도보 초기 페이지"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)("main",{className:l().main,children:[(0,t.jsx)("h1",{className:l().title,children:"HELLO WORLD (DOBO)"}),(0,t.jsx)("button",{onClick:n,style:{width:"300px",height:"50px",marginTop:"20px",border:"none",borderRadius:"8px",backgroundColor:"green",fontSize:"20px",color:"white"},children:"푸쉬 알림"}),(0,t.jsx)("button",{onClick:o,style:{width:"300px",height:"50px",marginTop:"20px",border:"none",borderRadius:"8px",backgroundColor:"red",fontSize:"20px",color:"white"},children:"푸쉬 해제"})]})]})}},7160:function(e){e.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb"}}},function(e){e.O(0,[165,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);